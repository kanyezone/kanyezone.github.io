"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[439],{4439:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var n=a(7568),i=a(4051),s=a.n(i),o=a(1438),r=a(2951),l=a(8029),m=a(460),u=a(2260),d=a.n(u),g=a(4111),p=function(e){(0,l.Z)(a,e);var t=(0,m.Z)(a);function a(e,n,i,s,r,l,m){var u;(0,o.Z)(this,a),e.anims.create({key:"land",frames:e.anims.generateFrameNames("snowball",{start:0,end:0,zeroPad:3,prefix:"Snowball_Land_",suffix:".png"}),frameRate:24,repeat:0}),u=t.call(this,e,n,i);var d=e.add.sprite(n,i,"snowball-shadow").setOrigin(.5,0);return u.snowball=e.add.sprite(0,0,"snowball").setOrigin(.5),u.add(u.snowball),e.add.existing((0,g.Z)(u)),d.tween=e.tweens.add({targets:d,y:r,x:s,ease:"Linear",duration:m,onCompleteScope:(0,g.Z)(u),onComplete:function(){d.destroy()}}),u.tween=e.tweens.add({targets:(0,g.Z)(u),x:s,ease:"Linear",duration:m,onCompleteScope:(0,g.Z)(u),onComplete:function(){this.snowball.play("land")}}),u.tween2=e.tweens.add({targets:(0,g.Z)(u),y:l,ease:"Sinusoidal.easeOut",duration:m/2,onCompleteScope:(0,g.Z)(u),onComplete:function(){this.tween3=e.tweens.add({targets:this,y:r,ease:"Sinusoidal.easeIn",duration:m/2})}}),u}return a}(d().GameObjects.Container),c=function(e){(0,l.Z)(a,e);var t=(0,m.Z)(a);function a(e,n,i){var s;return(0,o.Z)(this,a),e.anims.create({key:"walk-bottom",frames:e.anims.generateFrameNames("penguin",{start:0,end:7,zeroPad:3,prefix:"Walk_Bottom_",suffix:".png"}),frameRate:24,repeat:-1}),e.anims.create({key:"walk-bottom-left",frames:e.anims.generateFrameNames("penguin",{start:0,end:7,zeroPad:3,prefix:"Walk_Bottom_Left_",suffix:".png"}),frameRate:24,repeat:-1}),e.anims.create({key:"walk-left",frames:e.anims.generateFrameNames("penguin",{start:0,end:7,zeroPad:3,prefix:"Walk_Left_",suffix:".png"}),frameRate:24,repeat:-1}),e.anims.create({key:"walk-top",frames:e.anims.generateFrameNames("penguin",{start:0,end:7,zeroPad:3,prefix:"Walk_Top_",suffix:".png"}),frameRate:24,repeat:-1}),e.anims.create({key:"walk-top-left",frames:e.anims.generateFrameNames("penguin",{start:0,end:7,zeroPad:3,prefix:"Walk_Top_Left_",suffix:".png"}),frameRate:24,repeat:-1}),e.anims.create({key:"idle-bottom",frames:e.anims.generateFrameNames("penguin",{start:0,end:0,zeroPad:3,prefix:"Idle_Bottom_",suffix:".png"}),frameRate:24,repeat:0}),e.anims.create({key:"idle-bottom-left",frames:e.anims.generateFrameNames("penguin",{start:0,end:0,zeroPad:3,prefix:"Idle_Bottom_Left_",suffix:".png"}),frameRate:24,repeat:0}),e.anims.create({key:"idle-left",frames:e.anims.generateFrameNames("penguin",{start:0,end:0,zeroPad:3,prefix:"Idle_Left_",suffix:".png"}),frameRate:24,repeat:0}),e.anims.create({key:"idle-top-left",frames:e.anims.generateFrameNames("penguin",{start:0,end:0,zeroPad:3,prefix:"Idle_Top_Left_",suffix:".png"}),frameRate:24,repeat:0}),e.anims.create({key:"idle-top",frames:e.anims.generateFrameNames("penguin",{start:0,end:0,zeroPad:3,prefix:"Idle_Top_",suffix:".png"}),frameRate:24,repeat:0}),e.anims.create({key:"dance",frames:e.anims.generateFrameNames("penguin",{start:0,end:89,zeroPad:3,prefix:"Dance_",suffix:".png"}),frameRate:24,repeat:-1}),e.anims.create({key:"sit-bottom-left",frames:e.anims.generateFrameNames("penguin",{start:0,end:0,zeroPad:3,prefix:"Sit_Bottom_Left_",suffix:".png"}),frameRate:24,repeat:0}),e.anims.create({key:"sit-top-left",frames:e.anims.generateFrameNames("penguin",{start:0,end:0,zeroPad:3,prefix:"Sit_Top_Left_",suffix:".png"}),frameRate:24,repeat:0}),e.anims.create({key:"snowball-bottom-left",frames:e.anims.generateFrameNames("penguin",{start:0,end:30,zeroPad:3,prefix:"Snowball_Bottom_Left_",suffix:".png"}),frameRate:24,repeat:0}),e.anims.create({key:"snowball-bottom",frames:e.anims.generateFrameNames("penguin",{start:0,end:30,zeroPad:3,prefix:"Snowball_Bottom_",suffix:".png"}),frameRate:24,repeat:0}),e.anims.create({key:"snowball-left",frames:e.anims.generateFrameNames("penguin",{start:0,end:30,zeroPad:3,prefix:"Snowball_Left_",suffix:".png"}),frameRate:24,repeat:0}),e.anims.create({key:"snowball-top-left",frames:e.anims.generateFrameNames("penguin",{start:0,end:30,zeroPad:3,prefix:"Snowball_Top_Left_",suffix:".png"}),frameRate:24,repeat:0}),e.anims.create({key:"snowball-top",frames:e.anims.generateFrameNames("penguin",{start:0,end:30,zeroPad:3,prefix:"Snowball_Top_",suffix:".png"}),frameRate:24,repeat:0}),e.anims.create({key:"air",frames:e.anims.generateFrameNames("snowball",{start:0,end:0,zeroPad:3,prefix:"Snowball_Air_",suffix:".png"}),frameRate:24,repeat:0}),(s=t.call(this,e,i.x,i.y)).walking=!1,s.animating=!1,n==e.myId&&(s.blueRing=e.add.sprite(0,6,"blue-ring").setOrigin(.5,1),s.add(s.blueRing)),s.point=e.add.circle(0,-5,5,0,1).setOrigin(.5).setVisible(!1),s.username=e.add.text(0,13,i.username,{fontFamily:"Arial",color:"black",align:"center",fontSize:12}).setOrigin(.5),s.penguin=e.add.sprite(i.setX,i.setY,"penguin").setOrigin(.5,0).play(i.animation),s.penguin.scaleX=i.scaleX,s.add(s.point),s.add(s.username),s.add(s.penguin),s.setDepth(s.getBounds().y),e.add.existing((0,g.Z)(s)),s}return(0,r.Z)(a,[{key:"toggleSitPos",value:function(e){var t="sit-bottom-left",a=1,n=this.penguin.anims.currentAnim.key,i=this.penguin.scaleX;"sit-bottom-left"==n&&1==i&&(t="sit-top-left",a=1),"sit-top-left"==n&&1==i&&(t="sit-top-left",a=-1),"sit-top-left"==n&&-1==i&&(t="sit-bottom-left",a=-1),e.emit("send-anim",t,-36,0,a)}},{key:"walkAnim",value:function(e){var t="",a=0,n=-38,i=1,s="";return e<22.5&&e>=337.5?(t="walk-left",s="idle-left",a=-2,i=-1):e<67.5&&e>=22.5?(t="walk-bottom-left",s="idle-bottom-left",n=-40,a=-1,i=-1):e<112.5&&e>=67.5?(t="walk-bottom",s="idle-bottom"):e<157.5&&e>=112.5?(t="walk-bottom-left",s="idle-bottom-left",n=-40,a=1):e<202.5&&e>=157.5?(t="walk-left",s="idle-left",a=2):e<247.5&&e>=202.5?(t="walk-top-left",s="idle-top-left",a=1,n=-36):e<292.5&&e>=247.5?(t="walk-top",s="idle-top",n=-35):e<337.5&&e>=292.5?(t="walk-top-left",s="idle-top-left",n=-36,a=-1,i=-1):(t="walk-left",s="idle-left",a=-2,i=-1),this.penguin.setX(a),this.penguin.setY(n),this.penguin.scaleX=i,this.penguin.anims.currentAnim.key!=t&&this.penguin.play(t),s}},{key:"turn",value:function(e){var t="",a=1;e<22.5&&e>=337.5?(t="idle-left",a=-1):e<67.5&&e>=22.5?(t="idle-bottom-left",a=-1):e<112.5&&e>=67.5?t="idle-bottom":e<157.5&&e>=112.5?t="idle-bottom-left":e<202.5&&e>=157.5?t="idle-left":e<247.5&&e>=202.5?t="idle-top-left":e<292.5&&e>=247.5?t="idle-top":e<337.5&&e>=292.5?(t="idle-top-left",a=-1):(t="idle-left",a=-1),this.penguin.setX(0),this.penguin.setY(-43),this.penguin.scaleX=a,this.penguin.play(t)}},{key:"ranSnowballPos",value:function(e){var t=[{key:"snowball-bottom-left",setY:-40,setX:-3,scaleX:1},{key:"snowball-bottom",setY:-46,setX:0,scaleX:1},{key:"snowball-left",setY:-45,setX:-11,scaleX:1},{key:"snowball-top",setY:-59,setX:-1,scaleX:1},{key:"snowball-top-left",setY:-52,setX:0,scaleX:1},{key:"snowball-bottom-left",setY:-40,setX:3,scaleX:-1},{key:"snowball-left",setY:-45,setX:11,scaleX:-1},{key:"snowball-top-left",setY:-52,setX:0,scaleX:-1}][Math.floor(8*Math.random())+0];e.emit("send-anim",t.key,t.setY,t.setX,t.scaleX),e.emit("throw-snowball",t.key,t.scaleX)}},{key:"throwSnowball",value:function(e,t,a){var n,i,s,o=0,r=0,l=1,m=0,u=0;"snowball-bottom-left"==t&&(o=(Math.floor(181*Math.random())+20)*(0-a),r=Math.floor(51*Math.random())+0,m=-20*a,u=-10,l=4),"snowball-top-left"==t&&(o=(Math.floor(181*Math.random())+20)*(0-a),r=0-(Math.floor(51*Math.random())+0),m=-15*a,u=-25,l=2),"snowball-left"==t&&(o=(Math.floor(181*Math.random())+20)*(0-a),r=25-Math.floor(51*Math.random())+0,m=15*a,u=0,l=3),"snowball-bottom"==t&&(r=Math.floor(81*Math.random())+20,o=25-(Math.floor(51*Math.random())+0),m=25,u=-33,l=5),"snowball-top"==t&&(r=0-(Math.floor(81*Math.random())+20),o=25-(Math.floor(51*Math.random())+0),m=-26,u=-10,l=1),i=this.y+r,n=this.x+o;var d=Math.sqrt(o*o+r*r),g=2*d;s=this.y-d/l,e.time.delayedCall(840,(function(){e.avatarLayer.add(new p(e,this.x+m,this.y+u,n,i,s,g))}),[],this)}},{key:"updateAnim",value:function(e,t,a,n,i,s){var o;null===(o=this.tween)||void 0===o||o.remove(),this.walking=!1,this.x=t,this.y=a,this.penguin.play(e).setY(n).setX(i).scaleX=s,this.animating=!0}}]),a}(d().GameObjects.Container),h=function(e){(0,l.Z)(a,e);var t=(0,m.Z)(a);function a(e,n,i){var s;return(0,o.Z)(this,a),(s=t.call(this,e,n,i)).bubble=e.add.sprite(0,-35,"bubble4").setOrigin(.5,1),s.message=e.add.text(0,-52,"",{fontFamily:"Arial",color:"black",wordWrap:{width:110},align:"center",fontSize:12,lineSpacing:-2}).setOrigin(.5,1),s.emote=e.add.sprite(-1,-56,"emote-happy").setOrigin(.5,1).setVisible(!1),s.add(s.bubble),s.add(s.message),s.add(s.emote),s.setVisible(!1),e.add.existing((0,g.Z)(s)),s}return(0,r.Z)(a,[{key:"displayMessage",value:function(e,t){var a;null===(a=this.timer)||void 0===a||a.remove(),this.emote.setVisible(!1),this.message.setText(t),this.message.height<=18?this.bubble.setTexture("bubble3"):this.message.height<=32?this.bubble.setTexture("bubble2"):this.bubble.setTexture("bubble1"),this.setVisible(!0),e.bubbleLayer.bringToTop(this),this.timer=e.time.delayedCall(4e3,(function(){this.message.setText(""),this.setVisible(!1)}),[],this)}},{key:"displayEmote",value:function(e,t){var a;null===(a=this.timer)||void 0===a||a.remove(),this.message.setText(""),this.emote.setTexture(t),this.bubble.setTexture("bubble4"),this.emote.setVisible(!0),this.setVisible(!0),e.bubbleLayer.bringToTop(this),this.timer=e.time.delayedCall(4e3,(function(){this.emote.setVisible(!1),this.setVisible(!1)}),[],this)}}]),a}(d().GameObjects.Container),b=function(e){(0,l.Z)(a,e);var t=(0,m.Z)(a);function a(e,n,i,s){var r;return(0,o.Z)(this,a),(r=t.call(this,e,n,i)).tooltip=e.add.sprite(0,0,"tooltip").setOrigin(.5,1),r.add(r.tooltip),r.tip=e.add.text(0,-11,s,{fontFamily:"Arial",color:"#956800",align:"center",fontSize:12}).setOrigin(.5,1),r.add(r.tip),e.add.existing((0,g.Z)(r)),r}return a}(d().GameObjects.Container),f=function(e){(0,l.Z)(a,e);var t=(0,m.Z)(a);function a(e,n,i,s,r,l){var m;return(0,o.Z)(this,a),e.anims.create({key:"action-button-idle",frames:e.anims.generateFrameNames("action-button",{start:0,end:0,zeroPad:3,prefix:"Idle_",suffix:".png"}),frameRate:24,repeat:0}),e.anims.create({key:"action-button-hover",frames:e.anims.generateFrameNames("action-button",{start:0,end:0,zeroPad:3,prefix:"Hover_",suffix:".png"}),frameRate:24,repeat:0}),e.anims.create({key:"action-button-down",frames:e.anims.generateFrameNames("action-button",{start:0,end:0,zeroPad:3,prefix:"Down_",suffix:".png"}),frameRate:24,repeat:0}),(m=t.call(this,e,n,i)).button=e.add.sprite(0,0,"action-button").setOrigin(.5).play("action-button-idle"),m.button.scaleY=.99,m.add(m.button),m.icon=e.add.sprite(0,0,s).setOrigin(.5).setY(-1),m.add(m.icon),m.tooltip=new b(e,18,-15,l).setVisible(!1),m.add(m.tooltip),e.add.existing((0,g.Z)(m)),m.setSize(200,200),m.button.setInteractive({cursor:"pointer"}),m.button.on("pointerdown",(function(){m.button.play("action-button-down")})),m.button.on("pointerover",(function(){m.button.play("action-button-hover"),m.tooltip.setVisible(!0)})),m.button.on("pointerup",(function(){r(),m.button.play("action-button-hover")})),m.button.on("pointerout",(function(){m.button.play("action-button-idle"),m.tooltip.setVisible(!1)})),m}return a}(d().GameObjects.Container),y=function(e){(0,l.Z)(a,e);var t=(0,m.Z)(a);function a(e,n,i,s,r,l){var m;return(0,o.Z)(this,a),e.anims.create({key:"emote-button-idle",frames:e.anims.generateFrameNames("emote-button",{start:0,end:0,zeroPad:3,prefix:"Idle_",suffix:".png"}),frameRate:24,repeat:0}),e.anims.create({key:"emote-button-hover",frames:e.anims.generateFrameNames("emote-button",{start:0,end:0,zeroPad:3,prefix:"Hover_",suffix:".png"}),frameRate:24,repeat:0}),(m=t.call(this,e,n,i)).button=e.add.sprite(0,0,"emote-button").setOrigin(.5).play("emote-button-idle"),m.add(m.button),m.icon=e.add.sprite(0,0,s).setOrigin(.5),m.icon.scaleX=.9,m.icon.scaleY=.9,m.add(m.icon),e.add.existing((0,g.Z)(m)),m.setSize(200,200),m.button.setInteractive({cursor:"pointer"}),m.button.on("pointerover",(function(){m.button.play("emote-button-hover")})),m.button.on("pointerup",(function(){l.emit("send-emote",s),r.destroy()})),m.button.on("pointerout",(function(){m.button.play("emote-button-idle")})),m}return a}(d().GameObjects.Container),v=function(e){(0,l.Z)(a,e);var t=(0,m.Z)(a);function a(e,n,i,s){var r;return(0,o.Z)(this,a),(r=t.call(this,e,n,i)).emoteSelect=e.add.sprite(0,0,"emote-select").setOrigin(.5,.5),r.add(r.emoteSelect),r.happyButton=new y(e,-16,-91,"emote-happy",(0,g.Z)(r),s),r.add(r.happyButton),r.smileButton=new y(e,16,-91,"emote-smile",(0,g.Z)(r),s),r.add(r.smileButton),r.straightButton=new y(e,-16,-59,"emote-straight",(0,g.Z)(r),s),r.add(r.straightButton),r.sadButton=new y(e,16,-59,"emote-sad",(0,g.Z)(r),s),r.add(r.sadButton),r.shockedButton=new y(e,-16,-27,"emote-shocked",(0,g.Z)(r),s),r.add(r.shockedButton),r.rudeButton=new y(e,16,-27,"emote-rude",(0,g.Z)(r),s),r.add(r.rudeButton),r.winkButton=new y(e,-16,5,"emote-wink",(0,g.Z)(r),s),r.add(r.winkButton),r.sickButton=new y(e,16,5,"emote-sick",(0,g.Z)(r),s),r.add(r.sickButton),r.angryButton=new y(e,-16,37,"emote-angry",(0,g.Z)(r),s),r.add(r.angryButton),r.downButton=new y(e,16,37,"emote-down",(0,g.Z)(r),s),r.add(r.downButton),r.skullButton=new y(e,-16,69,"emote-skull",(0,g.Z)(r),s),r.add(r.skullButton),r.heartButton=new y(e,16,69,"emote-heart",(0,g.Z)(r),s),r.add(r.heartButton),e.add.existing((0,g.Z)(r)),r}return a}(d().GameObjects.Container),w=function(e){(0,l.Z)(a,e);var t=(0,m.Z)(a);function a(e,n,i,s){var r;return(0,o.Z)(this,a),(r=t.call(this,e,n,i)).chatbar=e.add.sprite(0,0,"chatbar").setOrigin(.5),r.add(r.chatbar),r.messageButton=new f(e,112,-109,"icon-message",(function(){""!=e.messageInput.value?(s.emit("send-message",e.messageInput.value),e.messageInput.value=""):document.activeElement.blur()}),"Send Chat"),r.add(r.messageButton),r.moreButton=new f(e,143,-109,"icon-more",(function(){e.toggleChatbar()}),"More"),r.add(r.moreButton),r.sitButton=new f(e,-146,-79,"icon-sit",(function(){1!=e.avatarLayer.avatars[e.myId].walking&&e.avatarLayer.avatars[e.myId].toggleSitPos(s)}),"Sit Down"),r.add(r.sitButton),r.snowballButton=new f(e,-116,-79,"icon-snowball",(function(){var t=e.avatarLayer.avatars[e.myId];1!=t.walking&&t.ranSnowballPos(s)}),"Snowball"),r.add(r.snowballButton),r.jokeButton=new f(e,-86,-79,"icon-joke",(function(){var t;null===(t=r.jokeAnswer)||void 0===t||t.remove();var a=Math.floor(Math.random()*(e.jokes.q.length-1-0+1))+0;s.emit("send-message",e.jokes.q[a]),r.jokeAnswer=e.time.delayedCall(4e3,(function(){s.emit("send-message",e.jokes.a[a])}),[],(0,g.Z)(r))}),"Tell Joke"),r.add(r.jokeButton),r.danceButton=new f(e,-56,-79,"icon-dance",(function(){1!=e.avatarLayer.avatars[e.myId].walking&&"dance"!=e.avatarLayer.avatars[e.myId].penguin.anims.currentAnim.key&&s.emit("send-anim","dance",-43,0,1)}),"Dance"),r.add(r.danceButton),r.emoteButton=new f(e,-26,-79,"icon-emote",(function(){var t;1==(null===(t=r.emoteSelect)||void 0===t?void 0:t.visible)?r.emoteSelect.destroy():(r.emoteSelect=new v(e,-25,-189,s),r.add(r.emoteSelect))}),"Smilies"),r.add(r.emoteButton),r.resButton=new f(e,112,-79,"icon-res",(function(){1==e.cameras.main.roundPixels?e.cameras.main.setRoundPixels(!1):e.cameras.main.setRoundPixels(!0)}),"Resolution"),r.creditsButton=new f(e,143,-79,"icon-credits",(function(){console.log("Hi")}),"Credits"),r.add(r.creditsButton),r.add(r.resButton),e.add.existing((0,g.Z)(r)),r}return a}(d().GameObjects.Container),k=a(9367),x=document.getElementById("message-form"),L=document.getElementById("overlay"),B=function(e){(0,l.Z)(a,e);var t=(0,m.Z)(a);function a(){return(0,o.Z)(this,a),t.apply(this,arguments)}return(0,r.Z)(a,[{key:"preload",value:function(){this.load.image("bubble1","./images/bubbles/bubble1.png"),this.load.image("bubble2","./images/bubbles/bubble2.png"),this.load.image("bubble3","./images/bubbles/bubble3.png"),this.load.image("bubble4","./images/bubbles/bubble4.png"),this.load.image("blue-ring","./images/rings/blue-ring.png"),this.load.image("green-ring","./images/rings/green-ring.png"),this.load.image("arrow-pole","./images/floor/arrow-pole.png"),this.load.image("emote-angry","./images/emotes/angry.png"),this.load.image("emote-down","./images/emotes/down.png"),this.load.image("emote-happy","./images/emotes/happy.png"),this.load.image("emote-heart","./images/emotes/heart.png"),this.load.image("emote-rude","./images/emotes/rude.png"),this.load.image("emote-sad","./images/emotes/sad.png"),this.load.image("emote-shocked","./images/emotes/shocked.png"),this.load.image("emote-sick","./images/emotes/sick.png"),this.load.image("emote-skull","./images/emotes/skull.png"),this.load.image("emote-smile","./images/emotes/smile.png"),this.load.image("emote-straight","./images/emotes/straight.png"),this.load.image("emote-wink","./images/emotes/wink.png"),this.load.image("icon-sit","./images/icons/sit.png"),this.load.image("icon-snowball","./images/icons/snowball.png"),this.load.image("icon-joke","./images/icons/joke.png"),this.load.image("icon-dance","./images/icons/dance.png"),this.load.image("icon-emote","./images/icons/emote.png"),this.load.image("icon-res","./images/icons/res.png"),this.load.image("icon-credits","./images/icons/credits.png"),this.load.image("icon-message","./images/icons/message.png"),this.load.image("icon-more","./images/icons/more.png"),this.load.image("chatbar","./images/ui/chatbar.png"),this.load.image("emote-select","./images/ui/emote-select.png"),this.load.image("tooltip","./images/ui/tooltip.png"),this.load.image("construction","./images/backgrounds/construction.png"),this.load.image("snowball-shadow","./images/snowball/snowball-shadow.png"),this.load.atlas("action-button","./images/spritesheets/buttons/action/button.png","images/spritesheets/buttons/action/button.json"),this.load.atlas("emote-button","./images/spritesheets/buttons/emote/button.png","images/spritesheets/buttons/emote/button.json"),this.load.atlas("snowball","./images/spritesheets/snowball/snowball.png","images/spritesheets/snowball/snowball.json"),this.load.atlas("penguin","./images/spritesheets/penguin/penguin.png","images/spritesheets/penguin/penguin.json")}},{key:"create",value:function(){var e=this;this.setName=prompt("Please enter a nickname"),null!=this.setName&&""!=this.setName||(this.setName="Guest"),this.jokes={q:["What's the best way to catch a fish?","What bird can write underwater?","What's black and white and goes round and around?","Why don't you see Penguins in Britain?","What do you call a penguin in the desert?","Why are penguins so popular on the Internet?","How does a penguin build its house?","Why are igloos round?","What is a penguin's favourite party game?","How do you communicate with a fish?","What do Penguins sing on a birthday?","Why is it so easy to weigh fish?","What lies at the bottom of the sea and shakes?","Why do penguins eat fish?","What do you call a fish with no eyes?","Who made this game?"],a:["Have someone throw it at you.","A ball point PENguin!","A Penguin in a revolving door.","Because they're afraid of Wales.","Lost.","Because they have Web feet!","Igloos it together","So that penguins can't hide in the corners.","Sardines","You drop him a line.","Freeze a jolly good fellow.","They have their own scales.","A nervous wreck!","Because donuts get soggy before they can catch them.","FSH","Kai Nicholas! It's not a joke..."]},this.messageInput=document.getElementById("message-input"),this.avatarLayer=this.add.container().setDepth(1),this.bubbleLayer=this.add.container().setDepth(2),this.uiLayer=this.add.container().setDepth(3),this.users={},this.avatarLayer.avatars={},this.bubbleLayer.bubbles={},this.myId="";var t=(0,k.io)("https://pc2js-server.onrender.com/");this.input.keyboard.on("keydown_W",(function(){""!=e.messageInput.value?(t.emit("send-message",e.messageInput.value),e.messageInput.value=""):document.activeElement.blur()}),this),this.background=this.add.sprite(0,0,"construction").setOrigin(0).setDepth(0),this.uiLayer.chatbar=new w(this,320,572,t),this.bounds=this.add.rectangle(0,0,640,180,0).setOrigin(0).setDepth(0).setVisible(!1),this.uiLayer.add(this.uiLayer.chatbar),this.avatarLayer.add(this.add.sprite(500,300,"arrow-pole").setOrigin(.5,1)),this.pointerx=this.game.input.activePointer.x,this.pointery=this.game.input.activePointer.y,x.addEventListener("submit",(function(a){a.preventDefault(),""!=e.messageInput.value?(t.emit("send-message",e.messageInput.value),e.messageInput.value=""):document.activeElement.blur()})),this.input.on("pointerdown",(function(){var a,n=e.game.input.activePointer.x,i=e.game.input.activePointer.y,s=!1;e.uiLayer.each((function(e){e.each((function(e){e.getBounds().contains(n,i)&&(s=!0)}))})),e.bounds.getBounds().contains(n,i)&&(s=!0),s||(null===(a=e.greenRing)||void 0===a||a.destroy(),e.greenRing=e.add.sprite(n,i-7,"green-ring").setDepth(0),t.emit("reset-user-animation"),t.emit("update-user-location",n,i))})),this.cameras.main.setBackgroundColor("#FDFD96"),this.cameras.main.setRoundPixels(!0),t.on("send-id",(function(t){e.myId=t})),t.on("send-users",(function(a){e.users=a,console.log(e.users),e.populateWorld(),t.emit("set-username",e.setName)})),t.on("new-user",(function(t,a){e.users[a]=t,e.initAvatar(a)})),t.on("send-anim",(function(t,a,n,i,s,o,r){e.avatarLayer.avatars[t].updateAnim(a,n,i,s,o,r)})),t.on("throw-snowball",(function(t,a,n){e.avatarLayer.avatars[t].throwSnowball(e,a,n)})),t.on("update-user-location",(function(t,a,n){var i,s=e.avatarLayer.avatars[t],o=s.point.getBounds().x,r=s.point.getBounds().y,l=new(d().Geom.Point)(o,r),m=new(d().Geom.Point)(a,n),u=d().Math.Angle.BetweenPoints(l,m);(u*=180/Math.PI)<0&&(u=360-Math.abs(u));null===(i=s.tween)||void 0===i||i.remove();var g=8*Math.hypot(s.x-a,s.y-n),p=s.walkAnim(u);s.walking=!0,s.animating=!0,s.tween=e.tweens.add({targets:s,x:a,y:n,ease:"Linear",onCompleteScope:e,duration:g,onComplete:function(){var e;(s&&(s.penguin.play(p).setY(-43).setX(0),s.animating=!1,s.walking=!1),t==this.myId)&&(this.pointerx=this.game.input.activePointer.x,this.pointery=this.game.input.activePointer.y,null===(e=this.greenRing)||void 0===e||e.destroy())}}),console.log(s),e.users[t].x=a,e.users[t].y=n})),t.on("set-username",(function(t,a){""!=a&&(e.users[t].username=a,e.avatarLayer.avatars[t].username.setText(a))})),t.on("send-message",(function(t,a){""!=a&&e.bubbleLayer.bubbles[t].displayMessage(e,a)})),t.on("send-emote",(function(t,a){e.bubbleLayer.bubbles[t].displayEmote(e,a)})),t.on("delete-user",(function(t){var a,n;null===(a=e.avatarLayer.avatars[t].tween)||void 0===a||a.remove(),e.avatarLayer.avatars[t].destroy(),null===(n=e.bubbleLayer.bubbles[t].timer)||void 0===n||n.remove(),e.bubbleLayer.bubbles[t].destroy(),delete e.users[t],delete e.avatarLayer.avatars[t],delete e.bubbleLayer.bubbles[t]}))}},{key:"initAvatar",value:function(e){var t=this.users[e];this.bubbleLayer.bubbles[e]=new h(this,0,0),this.bubbleLayer.add(this.bubbleLayer.bubbles[e]),this.avatarLayer.avatars[e]=new c(this,e,t),this.avatarLayer.add(this.avatarLayer.avatars[e]),"snowball"==t.animation.slice(0,8)&&this.avatarLayer.avatars[e].throwSnowball(this,t.animation,t.scaleX)}},{key:"populateWorld",value:function(){var e=this;Object.keys(this.users).forEach((function(t){e.initAvatar(t)}))}},{key:"update",value:function(){var e,t=this;if(Object.keys(this.avatarLayer.avatars).forEach((function(e){t.bubbleLayer.bubbles[e].setX(t.avatarLayer.avatars[e].x).setY(t.avatarLayer.avatars[e].y)})),this.avatarLayer.sort("y"),0==(null===(e=this.avatarLayer.avatars[this.myId])||void 0===e?void 0:e.animating)&&this.pointerx!=this.game.input.activePointer.x&&this.pointery!=this.game.input.activePointer.y){this.pointerx=this.game.input.activePointer.x,this.pointery=this.game.input.activePointer.y;var a=this.avatarLayer.avatars[this.myId].point.getBounds().x,n=this.avatarLayer.avatars[this.myId].point.getBounds().y,i=new(d().Geom.Point)(a,n),s=new(d().Geom.Point)(this.pointerx,this.pointery),o=d().Math.Angle.BetweenPoints(i,s);if((o*=180/Math.PI)<0)o=360-Math.abs(o);this.avatarLayer.avatars[this.myId].turn(o)}}},{key:"toggleChatbar",value:function(){console.log(this.uiLayer.chatbar.y),console.log(this.uiLayer.chatbar.getBounds().y),540==this.uiLayer.chatbar.y&&(this.tweens.add({targets:this.uiLayer.chatbar,y:572,ease:"Linear",duration:120,onComplete:function(){L.style.display="block"}}),L.style.top="474px",L.style.display="none"),572==this.uiLayer.chatbar.y&&(this.tweens.add({targets:this.uiLayer.chatbar,y:540,ease:"Linear",duration:120,onComplete:function(){L.style.display="block"}}),L.style.top="442px",L.style.display="none")}},{key:"toggleEmoteSelect",value:function(){"grid"!=emoteSelect.style.display?emoteSelect.style.display="grid":emoteSelect.style.display="none"}}]),a}(d().Scene),P=a(7294);function Z(){(0,P.useEffect)((function(){e()}),[]);var e=function(){var e=(0,n.Z)(s().mark((function e(){var t,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:t={width:640,height:480,parent:"gameDiv",type:Phaser.AUTO,physics:{default:"arcade",arcade:{gravity:{y:0}}},fps:{target:60,forceSetTimeOut:!0}},(a=new Phaser.Game(t)).scene.add("main",B),a.scene.start("main");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return null}}}]);